11장 시스템

시스템이라 하지만 관심사 분리가 주된 내용인 챕터
srp를 지키면서 객체지향적인 개발 -> 관심사 분리

"복잡성은 죽음이다. 개발자에게 생기를 앗아가며, 제품을 계획하고 제작하고 테스트하기 어렵게 만든다." - Ray Ozzie -

제작(construction)은 사용(use)과 아주 다르다.
소프트웨어 시스템은 애플리케이션 객체를 제작하고 의존성을 서로 연결하는 '준비과정'과
준비과정 이후에 이어지는 '런타임 로직'을 분리해야 한다.

일단 시작단계에서 관심사 분리다.
1. Main 분리
생성과 관련한 코드는 모드 main이나 main이 호출하는 모듈로 옮기고, 나머지 시스템은 모든 객체가 생성되었고 모든 의존성인 연결됨
-> main 함수에서 시스템에 필요한 객체를 생성한 후 이를 애플리케이션에 넘긴다. 애플리케이션은 그저 객체를 사용할 뿐.
-> 즉 애플리케이션은 main이나 객체가 생성되는 과정을 전혀 모른다.

2. 팩토리
때로는 객체가 생성되는 시점을 애플리케이션이 결정할 필요도 생긴다.

3. 의존성 주입
제어 역전 기법을 의존성 관리에서 적용한 메커니즘.
제어 역전에서는 한 객체가 맡은 보조 책임을 새로운 객체에게 전적으로 떠넘긴다.
새로운 객체는 넘겨받은 책임만 맡으므로 SRP를 지키게 된다.
의존성 관리 맥락에서 객체는 의존성 자체를 인스턴스로 만드는 책임은 지지 않는다. 대신에 이런 책임을 다른 전담 메커니즘에 넘겨야만 한다.
초기 설정은 시스템 전체에서 필요하므로 대개 책임질 메커니즘으로 main 루틴이나 특수 컨테이너를 사용한다.

[확장]
처음부터 올바르게 시스템을 만들 수 있다는 믿음은 미신이다. 대신에 우리는 오늘 주어진 사용자 스토리에 맞춰 시스템을 구현해야 한다.
내일은 새로운 스토리에 맞춰 시스템을 조정하고 확장하면 된다. 이것이 반복적이고 점진적인 애자일 방식의 핵심.
TDD, 리팩토링으로 얻어지는 깨끗한 코드는 코드 수준에서 시스템을 조정하고 확장하기 쉽게 만든다.

"소프트웨어 시스템은 물리적인 시스템과 다르다. 관심사를 적절히 분리해 관리한다면 소프트웨어 아키텍처는 점진적으로 분리할 수 있다."
-- 소프트웨어 시스템은 '수명이 짧다' 는 본질로 인해 아키텍처의 점진적인 발전이 가능하다. 

[횡단 관심사 - AOP]
Aspect Oriented Programming
-
